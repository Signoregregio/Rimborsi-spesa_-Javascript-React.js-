{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ls96\\\\Desktop\\\\Programming\\\\Stage\\\\2 parte\\\\rimborso-spese\\\\src\\\\Pages\\\\LoginPage.jsx\",\n  _s = $RefreshSig$();\nimport LoginForm from \"../Components/LoginPageComponents/LoginForm\";\nimport { useState } from \"react\";\nimport { getRole, hasRegistered } from \"../API/fetchFunc\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginPage(_ref) {\n  _s();\n  let {\n    disabled,\n    setDisabled\n  } = _ref;\n  const [user, setUser] = useState({\n    id: \"5\",\n    password: \"5\"\n  });\n  const [wrongData, setWrongData] = useState(false);\n  let navigate = useNavigate();\n  function handleUsernameChange(event) {\n    event.preventDefault();\n    const fieldValue = event.target.value;\n    const fieldName = event.target.name;\n    const newData = {\n      ...user\n    };\n    newData[fieldName] = fieldValue;\n    setUser(newData);\n  }\n  async function login() {\n    setDisabled(true);\n    let idHasRegistered = await hasRegistered(user);\n    if (idHasRegistered) {\n      let role = await getRole(user.id);\n      console.log(user.username + \" - \" + role);\n      sessionStorage.setItem(\"userRole\", role);\n      sessionStorage.setItem(\"username\", user.username);\n      navigate(`/home/${user.username}`);\n      setDisabled(false);\n    }\n    console.log(\"entro\");\n    setWrongData(true);\n    setUser({\n      username: \"\",\n      password: \"\"\n    });\n    setDisabled(false);\n  }\n  return /*#__PURE__*/_jsxDEV(LoginForm, {\n    handleUsernameChange: handleUsernameChange,\n    login: login,\n    wrongData: wrongData,\n    disabled: disabled\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginPage, \"eDlyyzceKhYfbmOv6RN/kNfHOfM=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["LoginForm","useState","getRole","hasRegistered","useNavigate","LoginPage","disabled","setDisabled","user","setUser","id","password","wrongData","setWrongData","navigate","handleUsernameChange","event","preventDefault","fieldValue","target","value","fieldName","name","newData","login","idHasRegistered","role","console","log","username","sessionStorage","setItem"],"sources":["C:/Users/ls96/Desktop/Programming/Stage/2 parte/rimborso-spese/src/Pages/LoginPage.jsx"],"sourcesContent":["import LoginForm from \"../Components/LoginPageComponents/LoginForm\";\r\nimport { useState } from \"react\";\r\nimport { getRole, hasRegistered } from \"../API/fetchFunc\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function LoginPage({disabled, setDisabled}){\r\n    \r\n    const [user, setUser] = useState({\r\n\t\tid: \"5\",\r\n\t\tpassword: \"5\",\r\n\t});\r\n\tconst [wrongData, setWrongData] = useState(false);\r\n\tlet navigate = useNavigate();\r\n\r\n\tfunction handleUsernameChange(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst fieldValue = event.target.value;\r\n\t\tconst fieldName = event.target.name;\r\n\t\tconst newData = { ...user };\r\n\t\tnewData[fieldName] = fieldValue;\r\n\r\n\t\tsetUser(newData);\r\n\t}\r\n\r\n\tasync function login() {\r\n        setDisabled(true)\r\n\t\tlet idHasRegistered = await hasRegistered(user);\r\n\t\tif (idHasRegistered) {\r\n\t\t\tlet role = await getRole(user.id);\r\n\t\t\tconsole.log(user.username + \" - \" + role);\r\n\t\t\tsessionStorage.setItem(\"userRole\", role);\r\n\t\t\tsessionStorage.setItem(\"username\", user.username);\r\n\t\t\tnavigate(`/home/${user.username}`);\r\n            setDisabled(false)\r\n\t\t}\r\n\r\n\t\tconsole.log(\"entro\");\r\n\t\tsetWrongData(true);\r\n\t\tsetUser({\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t});\r\n        setDisabled(false)\r\n\t}\r\n\r\n    return (\r\n        <LoginForm handleUsernameChange={handleUsernameChange} login={login} wrongData={wrongData} disabled={disabled} />\r\n    )\r\n}"],"mappings":";;AAAA,OAAOA,SAAS,MAAM,6CAA6C;AACnE,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO,EAAEC,aAAa,QAAQ,kBAAkB;AACzD,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAE/C,eAAe,SAASC,SAAS,OAAyB;EAAA;EAAA,IAAxB;IAACC,QAAQ;IAAEC;EAAW,CAAC;EAErD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC;IACnCS,EAAE,EAAE,GAAG;IACPC,QAAQ,EAAE;EACX,CAAC,CAAC;EACF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACjD,IAAIa,QAAQ,GAAGV,WAAW,EAAE;EAE5B,SAASW,oBAAoB,CAACC,KAAK,EAAE;IACpCA,KAAK,CAACC,cAAc,EAAE;IACtB,MAAMC,UAAU,GAAGF,KAAK,CAACG,MAAM,CAACC,KAAK;IACrC,MAAMC,SAAS,GAAGL,KAAK,CAACG,MAAM,CAACG,IAAI;IACnC,MAAMC,OAAO,GAAG;MAAE,GAAGf;IAAK,CAAC;IAC3Be,OAAO,CAACF,SAAS,CAAC,GAAGH,UAAU;IAE/BT,OAAO,CAACc,OAAO,CAAC;EACjB;EAEA,eAAeC,KAAK,GAAG;IAChBjB,WAAW,CAAC,IAAI,CAAC;IACvB,IAAIkB,eAAe,GAAG,MAAMtB,aAAa,CAACK,IAAI,CAAC;IAC/C,IAAIiB,eAAe,EAAE;MACpB,IAAIC,IAAI,GAAG,MAAMxB,OAAO,CAACM,IAAI,CAACE,EAAE,CAAC;MACjCiB,OAAO,CAACC,GAAG,CAACpB,IAAI,CAACqB,QAAQ,GAAG,KAAK,GAAGH,IAAI,CAAC;MACzCI,cAAc,CAACC,OAAO,CAAC,UAAU,EAAEL,IAAI,CAAC;MACxCI,cAAc,CAACC,OAAO,CAAC,UAAU,EAAEvB,IAAI,CAACqB,QAAQ,CAAC;MACjDf,QAAQ,CAAE,SAAQN,IAAI,CAACqB,QAAS,EAAC,CAAC;MACzBtB,WAAW,CAAC,KAAK,CAAC;IAC5B;IAEAoB,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACpBf,YAAY,CAAC,IAAI,CAAC;IAClBJ,OAAO,CAAC;MACPoB,QAAQ,EAAE,EAAE;MACZlB,QAAQ,EAAE;IACX,CAAC,CAAC;IACIJ,WAAW,CAAC,KAAK,CAAC;EACzB;EAEG,oBACI,QAAC,SAAS;IAAC,oBAAoB,EAAEQ,oBAAqB;IAAC,KAAK,EAAES,KAAM;IAAC,SAAS,EAAEZ,SAAU;IAAC,QAAQ,EAAEN;EAAS;IAAA;IAAA;IAAA;EAAA,QAAG;AAEzH;AAAC,GA3CuBD,SAAS;EAAA,QAOjBD,WAAW;AAAA;AAAA,KAPHC,SAAS;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}